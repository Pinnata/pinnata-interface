{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.contractKitReducer = void 0;\n\nvar connectors_1 = require(\"./connectors\");\n\nvar constants_1 = require(\"./constants\");\n\nfunction contractKitReducer(state, action) {\n  var _a;\n\n  var _b;\n\n  switch (action.type) {\n    case 'decrementPendingActionCount':\n      return __assign(__assign({}, state), {\n        pendingActionCount: state.pendingActionCount - 1\n      });\n\n    case 'setAddress':\n      if (action.payload) {\n        localStorage.setItem(constants_1.localStorageKeys.lastUsedAddress, action.payload);\n      } else {\n        localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n      }\n\n      return __assign(__assign({}, state), {\n        address: action.payload\n      });\n\n    case 'setNetwork':\n      if (action.payload.name !== state.network.name) {\n        var ConnectorConstructor = connectors_1.CONNECTOR_TYPES[state.connector.type];\n        var connectorArgs = JSON.parse(localStorage.getItem(constants_1.localStorageKeys.lastUsedWalletArguments) || '[]');\n        var connector = new (ConnectorConstructor.bind.apply(ConnectorConstructor, __spreadArray([void 0, action.payload], connectorArgs)))();\n        return __assign(__assign({}, state), {\n          network: action.payload,\n          connector: connector\n        });\n      } else {\n        return state;\n      }\n\n    case 'setConnector':\n      localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n      return __assign(__assign({}, state), {\n        connector: action.payload,\n        connectorInitError: null,\n        address: null\n      });\n\n    case 'initialisedConnector':\n      {\n        var address = (_b = action.payload.kit.defaultAccount) !== null && _b !== void 0 ? _b : null;\n\n        if (address) {\n          localStorage.setItem(constants_1.localStorageKeys.lastUsedAddress, address);\n        }\n\n        return __assign(__assign({}, state), {\n          connector: action.payload,\n          address: address\n        });\n      }\n\n    case 'destroy':\n      localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n      localStorage.removeItem(constants_1.localStorageKeys.lastUsedWalletType);\n      localStorage.removeItem(constants_1.localStorageKeys.lastUsedWalletArguments);\n      return __assign(__assign({}, state), {\n        address: null,\n        connector: new connectors_1.UnauthenticatedConnector(state.network)\n      });\n\n    default:\n      // This checks to see if the action type is `set<fieldname>`\n      if (action.type.slice(0, 3) === 'set') {\n        // This builds the proper camel-case field name from the action type\n        // e.g., setFieldName -> fieldName\n        var key = \"\" + action.type.charAt(3).toLowerCase() + action.type.slice(4);\n        return __assign(__assign({}, state), (_a = {}, _a[key] = action.payload, _a));\n      } else {\n        console.error(new Error(\"Unrecognized action type \" + action.type + \" in contractKitReducer\"));\n      }\n\n      return state;\n  }\n}\n\nexports.contractKitReducer = contractKitReducer;","map":{"version":3,"sources":["../src/contract-kit-reducer.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contractKitReducer = void 0;\nvar connectors_1 = require(\"./connectors\");\nvar constants_1 = require(\"./constants\");\nfunction contractKitReducer(state, action) {\n    var _a;\n    var _b;\n    switch (action.type) {\n        case 'decrementPendingActionCount':\n            return __assign(__assign({}, state), { pendingActionCount: state.pendingActionCount - 1 });\n        case 'setAddress':\n            if (action.payload) {\n                localStorage.setItem(constants_1.localStorageKeys.lastUsedAddress, action.payload);\n            }\n            else {\n                localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n            }\n            return __assign(__assign({}, state), { address: action.payload });\n        case 'setNetwork':\n            if (action.payload.name !== state.network.name) {\n                var ConnectorConstructor = connectors_1.CONNECTOR_TYPES[state.connector.type];\n                var connectorArgs = JSON.parse(localStorage.getItem(constants_1.localStorageKeys.lastUsedWalletArguments) || '[]');\n                var connector = new (ConnectorConstructor.bind.apply(ConnectorConstructor, __spreadArray([void 0, action.payload], connectorArgs)))();\n                return __assign(__assign({}, state), { network: action.payload, connector: connector });\n            }\n            else {\n                return state;\n            }\n        case 'setConnector':\n            localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n            return __assign(__assign({}, state), { connector: action.payload, connectorInitError: null, address: null });\n        case 'initialisedConnector': {\n            var address = (_b = action.payload.kit.defaultAccount) !== null && _b !== void 0 ? _b : null;\n            if (address) {\n                localStorage.setItem(constants_1.localStorageKeys.lastUsedAddress, address);\n            }\n            return __assign(__assign({}, state), { connector: action.payload, address: address });\n        }\n        case 'destroy':\n            localStorage.removeItem(constants_1.localStorageKeys.lastUsedAddress);\n            localStorage.removeItem(constants_1.localStorageKeys.lastUsedWalletType);\n            localStorage.removeItem(constants_1.localStorageKeys.lastUsedWalletArguments);\n            return __assign(__assign({}, state), { address: null, connector: new connectors_1.UnauthenticatedConnector(state.network) });\n        default:\n            // This checks to see if the action type is `set<fieldname>`\n            if (action.type.slice(0, 3) === 'set') {\n                // This builds the proper camel-case field name from the action type\n                // e.g., setFieldName -> fieldName\n                var key = \"\" + action.type.charAt(3).toLowerCase() + action.type.slice(4);\n                return __assign(__assign({}, state), (_a = {}, _a[key] = action.payload, _a));\n            }\n            else {\n                console.error(new Error(\"Unrecognized action type \" + action.type + \" in contractKitReducer\"));\n            }\n            return state;\n    }\n}\nexports.contractKitReducer = contractKitReducer;\n//# sourceMappingURL=contract-kit-reducer.js.map"]},"metadata":{},"sourceType":"script"}