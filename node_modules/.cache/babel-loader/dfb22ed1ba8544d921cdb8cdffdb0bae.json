{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useContractKit } from \"@celo-tools/use-contractkit\";\nimport SAFEBOX_ABI from \"src/abis/dahlia_contracts/SafeBox.json\";\nimport { useAsyncState } from \"src/hooks/useAsyncState\";\nimport { isAddress, toBN } from \"web3-utils\";\nimport { getAddress } from \"ethers/lib/utils\";\nimport { safeBoxMap } from \"src/config\";\nexport const useSafeBox = tokenAddress => {\n  _s();\n\n  const {\n    kit,\n    address\n  } = useContractKit();\n  const call = React.useCallback(async () => {\n    if (!tokenAddress || !isAddress(tokenAddress) || !address) {\n      return null;\n    }\n\n    const safeBox = new kit.web3.eth.Contract(SAFEBOX_ABI.abi, tokenAddress);\n    console.log(1);\n    const allowance = toBN(await safeBox.methods.allowance(address, safeBoxMap.get(getAddress(tokenAddress))).call());\n    console.log(2);\n    const balance = toBN(await safeBox.methods.balanceOf(address).call());\n    console.log(3);\n    return {\n      allowance,\n      balance\n    };\n  }, [kit, address, tokenAddress]);\n  return useAsyncState(null, call);\n};\n\n_s(useSafeBox, \"65oUwvUZD1z9qgK3qj8TClGRkms=\", false, function () {\n  return [useContractKit, useAsyncState];\n});","map":{"version":3,"sources":["/Users/kylescott/src/nomspace-interface/src/hooks/useSafeBox.ts"],"names":["React","useContractKit","SAFEBOX_ABI","useAsyncState","isAddress","toBN","getAddress","safeBoxMap","useSafeBox","tokenAddress","kit","address","call","useCallback","safeBox","web3","eth","Contract","abi","console","log","allowance","methods","get","balance","balanceOf"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,6BAA/B;AAEA,OAAOC,WAAP,MAAwB,wCAAxB;AAIA,SAASC,aAAT,QAA8B,yBAA9B;AACA,SAASC,SAAT,EAAoBC,IAApB,QAAyC,YAAzC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,YAA3B;AAEA,OAAO,MAAMC,UAAU,GAAIC,YAAD,IAA0B;AAAA;;AAClD,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAmBV,cAAc,EAAvC;AACA,QAAMW,IAAI,GAAGZ,KAAK,CAACa,WAAN,CAAkB,YAAY;AACzC,QAAI,CAACJ,YAAD,IAAiB,CAACL,SAAS,CAACK,YAAD,CAA3B,IAA6C,CAACE,OAAlD,EAA2D;AACzD,aAAO,IAAP;AACD;;AAED,UAAMG,OAAO,GAAI,IAAIJ,GAAG,CAACK,IAAJ,CAASC,GAAT,CAAaC,QAAjB,CACff,WAAW,CAACgB,GADG,EAEfT,YAFe,CAAjB;AAIAU,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,UAAMC,SAAS,GAAGhB,IAAI,CACpB,MAAMS,OAAO,CAACQ,OAAR,CAAgBD,SAAhB,CAA0BV,OAA1B,EAAmCJ,UAAU,CAACgB,GAAX,CAAejB,UAAU,CAACG,YAAD,CAAzB,CAAnC,EAA8EG,IAA9E,EADc,CAAtB;AAGAO,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,UAAMI,OAAO,GAAGnB,IAAI,CAAC,MAAMS,OAAO,CAACQ,OAAR,CAAgBG,SAAhB,CAA0Bd,OAA1B,EAAmCC,IAAnC,EAAP,CAApB;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,WAAO;AAAEC,MAAAA,SAAF;AAAaG,MAAAA;AAAb,KAAP;AACD,GAjBY,EAiBV,CAACd,GAAD,EAAMC,OAAN,EAAeF,YAAf,CAjBU,CAAb;AAkBA,SAAON,aAAa,CAAC,IAAD,EAAOS,IAAP,CAApB;AACD,CArBM;;GAAMJ,U;UACcP,c,EAmBlBE,a","sourcesContent":["import React from \"react\";\nimport { useContractKit } from \"@celo-tools/use-contractkit\";\nimport IERC20_ABI from \"src/abis/dahlia_contracts/IERC20.json\"\nimport SAFEBOX_ABI from \"src/abis/dahlia_contracts/SafeBox.json\"\nimport { SafeBox } from \"src/generated/SafeBox\";\nimport { IERC20 } from \"src/generated/IERC20\";\n\nimport { useAsyncState } from \"src/hooks/useAsyncState\";\nimport { isAddress, toBN, AbiItem } from \"web3-utils\";\nimport { getAddress } from \"ethers/lib/utils\";\nimport { safeBoxMap } from \"src/config\";\n\nexport const useSafeBox = (tokenAddress: string) => {\n  const { kit, address } = useContractKit();\n  const call = React.useCallback(async () => {\n    if (!tokenAddress || !isAddress(tokenAddress) || !address) {\n      return null;\n    }\n\n    const safeBox = (new kit.web3.eth.Contract(\n      SAFEBOX_ABI.abi as AbiItem[],\n      tokenAddress,\n    ) as unknown) as SafeBox;\n    console.log(1)\n    const allowance = toBN(\n      await safeBox.methods.allowance(address, safeBoxMap.get(getAddress(tokenAddress))!).call()\n    );\n    console.log(2)\n    const balance = toBN(await safeBox.methods.balanceOf(address).call());\n    console.log(3)\n    return { allowance, balance };\n  }, [kit, address, tokenAddress]);\n  return useAsyncState(null, call);\n};\n"]},"metadata":{},"sourceType":"module"}