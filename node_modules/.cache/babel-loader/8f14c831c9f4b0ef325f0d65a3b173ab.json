{"ast":null,"code":"import { toBN } from \"web3-utils\";\nconst scale = toBN(10).pow(toBN(18));\nexport const supplyRate = (totalSupply, totalBorrow, totalReserve, multiplier, baseRate, jumpMultiplier, kink, reserveFactor) => {\n  return borrowRate(totalSupply, totalBorrow, totalReserve, multiplier, baseRate, jumpMultiplier, kink).mul(utilRate(totalSupply, totalBorrow, totalReserve)).div(scale).mul(toBN(1).sub(reserveFactor)).div(scale);\n};\nexport const borrowRate = (totalSupply, totalBorrow, totalReserve, multiplier, baseRate, jumpMultiplier, kink) => {\n  const util = utilRate(totalSupply, totalBorrow, totalReserve);\n  return multiplier.mul(util.gt(kink) ? kink : util).div(scale).add(jumpMultiplier.mul(util.gt(kink) ? util.sub(kink) : toBN(0)).div(scale)).add(baseRate);\n};\nexport const utilRate = (totalSupply, totalBorrow, totalReserve) => {\n  return totalSupply.eq(toBN(0)) ? toBN(0) : totalBorrow.mul(scale).div(totalSupply);\n};","map":{"version":3,"sources":["/Users/kylescott/src/nomspace-interface/src/utils/rates.ts"],"names":["toBN","scale","pow","supplyRate","totalSupply","totalBorrow","totalReserve","multiplier","baseRate","jumpMultiplier","kink","reserveFactor","borrowRate","mul","utilRate","div","sub","util","gt","add","eq"],"mappings":"AACA,SAASA,IAAT,QAAqB,YAArB;AAEA,MAAMC,KAAK,GAAGD,IAAI,CAAC,EAAD,CAAJ,CAASE,GAAT,CAAaF,IAAI,CAAC,EAAD,CAAjB,CAAd;AACA,OAAO,MAAMG,UAAU,GAAG,CAACC,WAAD,EAAkBC,WAAlB,EAAmCC,YAAnC,EAAqDC,UAArD,EAAqEC,QAArE,EAAmFC,cAAnF,EAAuGC,IAAvG,EAAiHC,aAAjH,KAAuI;AAC7J,SAAOC,UAAU,CAACR,WAAD,EAAcC,WAAd,EAA2BC,YAA3B,EAAyCC,UAAzC,EAAqDC,QAArD,EAA+DC,cAA/D,EAA+EC,IAA/E,CAAV,CACNG,GADM,CACFC,QAAQ,CAACV,WAAD,EAAcC,WAAd,EAA2BC,YAA3B,CADN,EACgDS,GADhD,CACoDd,KADpD,EAENY,GAFM,CAEFb,IAAI,CAAC,CAAD,CAAJ,CAAQgB,GAAR,CAAYL,aAAZ,CAFE,EAE0BI,GAF1B,CAE8Bd,KAF9B,CAAP;AAGH,CAJM;AAMP,OAAO,MAAMW,UAAU,GAAG,CAACR,WAAD,EAAkBC,WAAlB,EAAmCC,YAAnC,EAAqDC,UAArD,EAAqEC,QAArE,EAAmFC,cAAnF,EAAuGC,IAAvG,KAAoH;AAC1I,QAAMO,IAAI,GAAGH,QAAQ,CAACV,WAAD,EAAcC,WAAd,EAA2BC,YAA3B,CAArB;AACA,SAAOC,UAAU,CAACM,GAAX,CAAeI,IAAI,CAACC,EAAL,CAAQR,IAAR,IAAgBA,IAAhB,GAAuBO,IAAtC,EAA4CF,GAA5C,CAAgDd,KAAhD,EACNkB,GADM,CACFV,cAAc,CAACI,GAAf,CAAmBI,IAAI,CAACC,EAAL,CAAQR,IAAR,IAAgBO,IAAI,CAACD,GAAL,CAASN,IAAT,CAAhB,GAAiCV,IAAI,CAAC,CAAD,CAAxD,EAA6De,GAA7D,CAAiEd,KAAjE,CADE,EAENkB,GAFM,CAEFX,QAFE,CAAP;AAGH,CALM;AAOP,OAAO,MAAMM,QAAQ,GAAG,CAACV,WAAD,EAAkBC,WAAlB,EAAmCC,YAAnC,KAAwD;AAC5E,SAAOF,WAAW,CAACgB,EAAZ,CAAepB,IAAI,CAAC,CAAD,CAAnB,IAA0BA,IAAI,CAAC,CAAD,CAA9B,GAAoCK,WAAW,CAACQ,GAAZ,CAAgBZ,KAAhB,EAAuBc,GAAvB,CAA2BX,WAA3B,CAA3C;AACH,CAFM","sourcesContent":["import BN from \"bn.js\"\nimport { toBN } from \"web3-utils\";\n\nconst scale = toBN(10).pow(toBN(18)); \nexport const supplyRate = (totalSupply: BN, totalBorrow: BN, totalReserve: BN, multiplier: BN, baseRate: BN, jumpMultiplier: BN, kink: BN, reserveFactor: BN) => {\n    return borrowRate(totalSupply, totalBorrow, totalReserve, multiplier, baseRate, jumpMultiplier, kink)\n    .mul(utilRate(totalSupply, totalBorrow, totalReserve)).div(scale)\n    .mul(toBN(1).sub(reserveFactor)).div(scale); \n}\n\nexport const borrowRate = (totalSupply: BN, totalBorrow: BN, totalReserve: BN, multiplier: BN, baseRate: BN, jumpMultiplier: BN, kink: BN) => {\n    const util = utilRate(totalSupply, totalBorrow, totalReserve);\n    return multiplier.mul(util.gt(kink) ? kink : util).div(scale)\n    .add(jumpMultiplier.mul(util.gt(kink) ? util.sub(kink) : toBN(0)).div(scale))\n    .add(baseRate); \n}\n\nexport const utilRate = (totalSupply: BN, totalBorrow: BN, totalReserve: BN) => {\n    return totalSupply.eq(toBN(0)) ? toBN(0) : totalBorrow.mul(scale).div(totalSupply);\n}"]},"metadata":{},"sourceType":"module"}