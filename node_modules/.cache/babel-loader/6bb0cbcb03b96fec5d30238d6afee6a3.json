{"ast":null,"code":"import React, { useMemo, useState, useEffect } from 'react';\nimport { useThemeUI, jsx, __ThemeUIInternalBaseThemeProvider } from '@theme-ui/core';\nimport { css, get } from '@theme-ui/css';\nimport { Global } from '@emotion/react';\n\nconst toVarName = key => `--theme-ui-${key.replace('-__default', '')}`;\n\nconst toVarValue = key => `var(${toVarName(key)})`;\n\nconst join = (...args) => args.filter(Boolean).join('-');\n\nconst reservedKeys = {\n  useCustomProperties: true,\n  initialColorModeName: true,\n  printColorModeName: true,\n  initialColorMode: true,\n  useLocalStorage: true\n};\n\nconst toCustomProperties = (obj, parent, themeKey) => {\n  const next = Array.isArray(obj) ? [] : {};\n\n  for (let key in obj) {\n    const value = obj[key];\n    const name = join(parent, key);\n\n    if (value && typeof value === 'object') {\n      next[key] = toCustomProperties(value, name);\n      continue;\n    }\n\n    if (reservedKeys[key]) {\n      next[key] = value;\n      continue;\n    }\n\n    next[key] = toVarValue(name);\n  }\n\n  return next;\n};\n\nconst objectToVars = (parent, obj) => {\n  let vars = {};\n\n  for (let key in obj) {\n    if (key === 'modes') continue;\n    const name = join(parent, key);\n    const value = obj[key];\n\n    if (value && typeof value === 'object') {\n      vars = { ...vars,\n        ...objectToVars(name, value)\n      };\n    } else {\n      vars[toVarName(name)] = value;\n    }\n  }\n\n  return vars;\n}; // create root styles for color modes\n\n\nconst createColorStyles = (theme = {}) => {\n  const {\n    useCustomProperties,\n    initialColorModeName,\n    printColorModeName,\n    useRootStyles\n  } = theme.config || theme || {};\n  const colors = theme.rawColors || theme.colors;\n  if (!colors || useRootStyles === false) return {};\n\n  if (useCustomProperties === false) {\n    return css({\n      html: {\n        color: 'text',\n        bg: 'background'\n      }\n    })(theme);\n  }\n\n  const modes = colors.modes || {};\n  const styles = objectToVars('colors', colors);\n  Object.keys(modes).forEach(mode => {\n    const key = `&.theme-ui-${mode}`;\n    styles[key] = objectToVars('colors', modes[mode]);\n  });\n\n  if (printColorModeName) {\n    const mode = printColorModeName === 'initial' || printColorModeName === initialColorModeName ? colors : modes[printColorModeName];\n    styles['@media print'] = objectToVars('colors', mode);\n  }\n\n  const colorToVarValue = color => toVarValue(`colors-${color}`);\n\n  return css({\n    html: { ...styles,\n      color: colorToVarValue('text'),\n      bg: colorToVarValue('background')\n    }\n  })(theme);\n};\n\nconst STORAGE_KEY = 'theme-ui-color-mode';\nconst storage = {\n  get: () => {\n    try {\n      return window.localStorage.getItem(STORAGE_KEY);\n    } catch (e) {\n      console.warn('localStorage is disabled and color mode might not work as expected.', 'Please check your Site Settings.', e);\n    }\n  },\n  set: value => {\n    try {\n      window.localStorage.setItem(STORAGE_KEY, value);\n    } catch (e) {\n      console.warn('localStorage is disabled and color mode might not work as expected.', 'Please check your Site Settings.', e);\n    }\n  }\n};\n\nconst getPreferredColorScheme = () => {\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      return 'dark';\n    }\n\n    if (window.matchMedia('(prefers-color-scheme: light)').matches) {\n      return 'light';\n    }\n  }\n\n  return null;\n};\n\nconst getModeFromClass = () => {\n  let mode;\n\n  if (typeof document !== 'undefined') {\n    document.documentElement.classList.forEach(className => {\n      if (className.startsWith('theme-ui-')) {\n        mode = className.replace('theme-ui-', '');\n      }\n    });\n  }\n\n  return mode;\n};\n\nconst useColorModeState = (theme = {}) => {\n  const {\n    initialColorModeName,\n    useColorSchemeMediaQuery,\n    useLocalStorage\n  } = theme.config || theme;\n  let [mode, setMode] = useState(() => {\n    const modeFromClass = getModeFromClass();\n\n    if (modeFromClass) {\n      return modeFromClass;\n    }\n\n    const preferredMode = useColorSchemeMediaQuery !== false && getPreferredColorScheme();\n    return preferredMode || initialColorModeName;\n  }); // on first render, we read the color mode from localStorage and\n  // clear the class on document element body\n\n  useEffect(() => {\n    const stored = useLocalStorage !== false && storage.get();\n\n    if (typeof document !== 'undefined') {\n      document.documentElement.classList.remove('theme-ui-' + stored);\n      document.body.classList.remove('theme-ui-' + stored);\n    }\n\n    if (stored && stored !== mode) {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      mode = stored;\n      setMode(stored);\n    }\n  }, []); // when mode changes, we save it to localStorage\n\n  React.useEffect(() => {\n    if (mode && useLocalStorage !== false) {\n      storage.set(mode);\n    }\n  }, [mode, useLocalStorage]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var _theme$colors;\n\n    if ((_theme$colors = theme.colors) != null && _theme$colors.modes && initialColorModeName && Object.keys(theme.colors.modes).indexOf(initialColorModeName) > -1) {\n      console.warn('[theme-ui] The `initialColorModeName` value should be a unique name' + ' and cannot reference a key in `theme.colors.modes`.');\n    }\n  }\n\n  return [mode, setMode];\n};\n\nfunction useColorMode() {\n  const {\n    colorMode,\n    setColorMode\n  } = useThemeUI();\n\n  if (typeof setColorMode !== 'function') {\n    throw new Error(`[useColorMode] requires the ColorModeProvider component`);\n  } // We're allowing the user to specify a narrower type for its color mode name.\n\n\n  return [colorMode, setColorMode];\n}\n\nconst omitModes = colors => {\n  const res = { ...colors\n  };\n  delete res.modes;\n  return res;\n};\n\nfunction copyRawColors(colors, outerThemeRawColors) {\n  for (const [key, value] of Object.entries(colors)) {\n    if (typeof value === 'string' && !value.startsWith('var(')) {\n      outerThemeRawColors[key] = value;\n    }\n\n    if (typeof value === 'object') {\n      outerThemeRawColors[key] = { ...outerThemeRawColors[key],\n        ...copyRawColors(value, {})\n      };\n    }\n  }\n\n  return outerThemeRawColors;\n}\n\nconst ColorModeProvider = ({\n  children\n}) => {\n  const outer = useThemeUI();\n  const outerTheme = outer.theme;\n  const [colorMode, setColorMode] = useColorModeState(outerTheme);\n  const theme = useMemo(() => {\n    const res = { ...outerTheme\n    };\n    const modes = get(res, 'colors.modes', {});\n    const currentColorMode = get(modes, colorMode, {});\n\n    if (colorMode) {\n      res.colors = { ...res.colors,\n        ...currentColorMode\n      };\n    }\n\n    const {\n      useCustomProperties,\n      initialColorModeName = '__default'\n    } = outerTheme.config || outerTheme;\n    let outerThemeRawColors = outerTheme.rawColors || outerTheme.colors || {};\n\n    if (useCustomProperties !== false) {\n      const alreadyHasRawColors = res.rawColors != null;\n      const colors = res.colors || {};\n\n      if (alreadyHasRawColors) {\n        outerThemeRawColors = { ...outerThemeRawColors\n        };\n        copyRawColors(colors, outerThemeRawColors);\n\n        if ('modes' in outerThemeRawColors) {\n          var _res$rawColors;\n\n          res.rawColors = { ...outerThemeRawColors,\n            modes: { ...((_res$rawColors = res.rawColors) == null ? void 0 : _res$rawColors.modes),\n              [initialColorModeName]: omitModes(outerThemeRawColors)\n            }\n          };\n        } else {\n          res.rawColors = outerThemeRawColors;\n        }\n      } else {\n        if (!('modes' in outerThemeRawColors)) {\n          res.rawColors = colors;\n        } else {\n          const modes = {\n            [initialColorModeName]: omitModes(outerThemeRawColors),\n            ...outerThemeRawColors.modes\n          };\n          res.rawColors = { ...colors,\n            modes\n          };\n          /* modes doesn't match index signature by design */\n        }\n      }\n\n      res.colors = toCustomProperties(omitModes(outerThemeRawColors), 'colors');\n    }\n\n    return res;\n  }, [colorMode, outerTheme]);\n  const context = { ...outer,\n    theme,\n    colorMode,\n    setColorMode\n  };\n  const isTopLevelColorModeProvider = outer.setColorMode === undefined;\n  return jsx(__ThemeUIInternalBaseThemeProvider, {\n    context\n  }, isTopLevelColorModeProvider ? jsx(Global, {\n    styles: () => {\n      return createColorStyles(theme);\n    }\n  }) : jsx('div', {\n    className: 'theme-ui__nested-color-mode-provider',\n    style: createColorStyles(theme)['html']\n  }), children);\n};\n\nconst noflash = `(function() { try {\n  var mode = localStorage.getItem('theme-ui-color-mode');\n  if (!mode) return\n  document.documentElement.classList.add('theme-ui-' + mode);\n  document.body.classList.add('theme-ui-' + mode);\n} catch (e) {} })();`;\n\nconst InitializeColorMode = () => jsx('script', {\n  key: 'theme-ui-no-flash',\n  dangerouslySetInnerHTML: {\n    __html: noflash\n  }\n});\n\nexport { ColorModeProvider, InitializeColorMode, useColorMode };","map":{"version":3,"sources":["/Users/kylescott/src/nomspace-interface/node_modules/@theme-ui/color-modes/dist/theme-ui-color-modes.esm.js"],"names":["React","useMemo","useState","useEffect","useThemeUI","jsx","__ThemeUIInternalBaseThemeProvider","css","get","Global","toVarName","key","replace","toVarValue","join","args","filter","Boolean","reservedKeys","useCustomProperties","initialColorModeName","printColorModeName","initialColorMode","useLocalStorage","toCustomProperties","obj","parent","themeKey","next","Array","isArray","value","name","objectToVars","vars","createColorStyles","theme","useRootStyles","config","colors","rawColors","html","color","bg","modes","styles","Object","keys","forEach","mode","colorToVarValue","STORAGE_KEY","storage","window","localStorage","getItem","e","console","warn","set","setItem","getPreferredColorScheme","matchMedia","matches","getModeFromClass","document","documentElement","classList","className","startsWith","useColorModeState","useColorSchemeMediaQuery","setMode","modeFromClass","preferredMode","stored","remove","body","process","env","NODE_ENV","_theme$colors","indexOf","useColorMode","colorMode","setColorMode","Error","omitModes","res","copyRawColors","outerThemeRawColors","entries","ColorModeProvider","children","outer","outerTheme","currentColorMode","alreadyHasRawColors","_res$rawColors","context","isTopLevelColorModeProvider","undefined","style","noflash","InitializeColorMode","dangerouslySetInnerHTML","__html"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect } from 'react';\nimport { useThemeUI, jsx, __ThemeUIInternalBaseThemeProvider } from '@theme-ui/core';\nimport { css, get } from '@theme-ui/css';\nimport { Global } from '@emotion/react';\n\nconst toVarName = key => `--theme-ui-${key.replace('-__default', '')}`;\n\nconst toVarValue = key => `var(${toVarName(key)})`;\n\nconst join = (...args) => args.filter(Boolean).join('-');\nconst reservedKeys = {\n  useCustomProperties: true,\n  initialColorModeName: true,\n  printColorModeName: true,\n  initialColorMode: true,\n  useLocalStorage: true\n};\n\n\nconst toCustomProperties = (obj, parent, themeKey) => {\n  const next = Array.isArray(obj) ? [] : {};\n\n  for (let key in obj) {\n    const value = obj[key];\n    const name = join(parent, key);\n\n    if (value && typeof value === 'object') {\n      next[key] = toCustomProperties(value, name);\n      continue;\n    }\n\n    if (reservedKeys[key]) {\n      next[key] = value;\n      continue;\n    }\n    next[key] = toVarValue(name);\n  }\n\n  return next;\n};\nconst objectToVars = (parent, obj) => {\n  let vars = {};\n\n  for (let key in obj) {\n    if (key === 'modes') continue;\n    const name = join(parent, key);\n    const value = obj[key];\n\n    if (value && typeof value === 'object') {\n      vars = { ...vars,\n        ...objectToVars(name, value)\n      };\n    } else {\n      vars[toVarName(name)] = value;\n    }\n  }\n\n  return vars;\n}; // create root styles for color modes\n\nconst createColorStyles = (theme = {}) => {\n  const {\n    useCustomProperties,\n    initialColorModeName,\n    printColorModeName,\n    useRootStyles\n  } = theme.config || theme || {};\n  const colors = theme.rawColors || theme.colors;\n  if (!colors || useRootStyles === false) return {};\n\n  if (useCustomProperties === false) {\n    return css({\n      html: {\n        color: 'text',\n        bg: 'background'\n      }\n    })(theme);\n  }\n\n  const modes = colors.modes || {};\n  const styles = objectToVars('colors', colors);\n  Object.keys(modes).forEach(mode => {\n    const key = `&.theme-ui-${mode}`;\n    styles[key] = objectToVars('colors', modes[mode]);\n  });\n\n  if (printColorModeName) {\n    const mode = printColorModeName === 'initial' || printColorModeName === initialColorModeName ? colors : modes[printColorModeName];\n    styles['@media print'] = objectToVars('colors', mode);\n  }\n\n  const colorToVarValue = color => toVarValue(`colors-${color}`);\n\n  return css({\n    html: { ...styles,\n      color: colorToVarValue('text'),\n      bg: colorToVarValue('background')\n    }\n  })(theme);\n};\n\nconst STORAGE_KEY = 'theme-ui-color-mode';\nconst storage = {\n  get: () => {\n    try {\n      return window.localStorage.getItem(STORAGE_KEY);\n    } catch (e) {\n      console.warn('localStorage is disabled and color mode might not work as expected.', 'Please check your Site Settings.', e);\n    }\n  },\n  set: value => {\n    try {\n      window.localStorage.setItem(STORAGE_KEY, value);\n    } catch (e) {\n      console.warn('localStorage is disabled and color mode might not work as expected.', 'Please check your Site Settings.', e);\n    }\n  }\n};\n\nconst getPreferredColorScheme = () => {\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      return 'dark';\n    }\n\n    if (window.matchMedia('(prefers-color-scheme: light)').matches) {\n      return 'light';\n    }\n  }\n\n  return null;\n};\n\nconst getModeFromClass = () => {\n  let mode;\n\n  if (typeof document !== 'undefined') {\n    document.documentElement.classList.forEach(className => {\n      if (className.startsWith('theme-ui-')) {\n        mode = className.replace('theme-ui-', '');\n      }\n    });\n  }\n\n  return mode;\n};\n\nconst useColorModeState = (theme = {}) => {\n  const {\n    initialColorModeName,\n    useColorSchemeMediaQuery,\n    useLocalStorage\n  } = theme.config || theme;\n  let [mode, setMode] = useState(() => {\n    const modeFromClass = getModeFromClass();\n\n    if (modeFromClass) {\n      return modeFromClass;\n    }\n\n    const preferredMode = useColorSchemeMediaQuery !== false && getPreferredColorScheme();\n    return preferredMode || initialColorModeName;\n  }); // on first render, we read the color mode from localStorage and\n  // clear the class on document element body\n\n  useEffect(() => {\n    const stored = useLocalStorage !== false && storage.get();\n\n    if (typeof document !== 'undefined') {\n      document.documentElement.classList.remove('theme-ui-' + stored);\n      document.body.classList.remove('theme-ui-' + stored);\n    }\n\n    if (stored && stored !== mode) {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      mode = stored;\n      setMode(stored);\n    }\n  }, []); // when mode changes, we save it to localStorage\n\n  React.useEffect(() => {\n    if (mode && useLocalStorage !== false) {\n      storage.set(mode);\n    }\n  }, [mode, useLocalStorage]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var _theme$colors;\n\n    if ((_theme$colors = theme.colors) != null && _theme$colors.modes && initialColorModeName && Object.keys(theme.colors.modes).indexOf(initialColorModeName) > -1) {\n      console.warn('[theme-ui] The `initialColorModeName` value should be a unique name' + ' and cannot reference a key in `theme.colors.modes`.');\n    }\n  }\n\n  return [mode, setMode];\n};\n\nfunction useColorMode() {\n  const {\n    colorMode,\n    setColorMode\n  } = useThemeUI();\n\n  if (typeof setColorMode !== 'function') {\n    throw new Error(`[useColorMode] requires the ColorModeProvider component`);\n  } // We're allowing the user to specify a narrower type for its color mode name.\n\n\n  return [colorMode, setColorMode];\n}\n\nconst omitModes = colors => {\n  const res = { ...colors\n  };\n  delete res.modes;\n  return res;\n};\n\nfunction copyRawColors(colors, outerThemeRawColors) {\n  for (const [key, value] of Object.entries(colors)) {\n    if (typeof value === 'string' && !value.startsWith('var(')) {\n      outerThemeRawColors[key] = value;\n    }\n\n    if (typeof value === 'object') {\n      outerThemeRawColors[key] = { ...outerThemeRawColors[key],\n        ...copyRawColors(value, {})\n      };\n    }\n  }\n\n  return outerThemeRawColors;\n}\n\nconst ColorModeProvider = ({\n  children\n}) => {\n  const outer = useThemeUI();\n  const outerTheme = outer.theme;\n  const [colorMode, setColorMode] = useColorModeState(outerTheme);\n  const theme = useMemo(() => {\n    const res = { ...outerTheme\n    };\n    const modes = get(res, 'colors.modes', {});\n    const currentColorMode = get(modes, colorMode, {});\n\n    if (colorMode) {\n      res.colors = { ...res.colors,\n        ...currentColorMode\n      };\n    }\n\n    const {\n      useCustomProperties,\n      initialColorModeName = '__default'\n    } = outerTheme.config || outerTheme;\n    let outerThemeRawColors = outerTheme.rawColors || outerTheme.colors || {};\n\n    if (useCustomProperties !== false) {\n      const alreadyHasRawColors = res.rawColors != null;\n      const colors = res.colors || {};\n\n      if (alreadyHasRawColors) {\n        outerThemeRawColors = { ...outerThemeRawColors\n        };\n        copyRawColors(colors, outerThemeRawColors);\n\n        if ('modes' in outerThemeRawColors) {\n          var _res$rawColors;\n\n          res.rawColors = { ...outerThemeRawColors,\n            modes: { ...((_res$rawColors = res.rawColors) == null ? void 0 : _res$rawColors.modes),\n              [initialColorModeName]: omitModes(outerThemeRawColors)\n            }\n          };\n        } else {\n          res.rawColors = outerThemeRawColors;\n        }\n      } else {\n        if (!('modes' in outerThemeRawColors)) {\n          res.rawColors = colors;\n        } else {\n          const modes = {\n            [initialColorModeName]: omitModes(outerThemeRawColors),\n            ...outerThemeRawColors.modes\n          };\n          res.rawColors = { ...colors,\n            modes\n          };\n          /* modes doesn't match index signature by design */\n        }\n      }\n\n      res.colors = toCustomProperties(omitModes(outerThemeRawColors), 'colors');\n    }\n\n    return res;\n  }, [colorMode, outerTheme]);\n  const context = { ...outer,\n    theme,\n    colorMode,\n    setColorMode\n  };\n  const isTopLevelColorModeProvider = outer.setColorMode === undefined;\n  return jsx(__ThemeUIInternalBaseThemeProvider, {\n    context\n  }, isTopLevelColorModeProvider ? jsx(Global, {\n    styles: () => {\n      return createColorStyles(theme);\n    }\n  }) : jsx('div', {\n    className: 'theme-ui__nested-color-mode-provider',\n    style: createColorStyles(theme)['html']\n  }), children);\n};\nconst noflash = `(function() { try {\n  var mode = localStorage.getItem('theme-ui-color-mode');\n  if (!mode) return\n  document.documentElement.classList.add('theme-ui-' + mode);\n  document.body.classList.add('theme-ui-' + mode);\n} catch (e) {} })();`;\nconst InitializeColorMode = () => jsx('script', {\n  key: 'theme-ui-no-flash',\n  dangerouslySetInnerHTML: {\n    __html: noflash\n  }\n});\n\nexport { ColorModeProvider, InitializeColorMode, useColorMode };\n"]},"metadata":{},"sourceType":"module"}